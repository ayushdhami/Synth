<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Featured Collection - Synth</title>
<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
<style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f5f5f5; }
    header { background: black; color: white; display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; }
    .cart-icon { position: relative; cursor: pointer; }
    .cart-icon span { background: red; color: white; border-radius: 50%; padding: 3px 7px; font-size: 12px; position: absolute; top: -5px; right: -10px; }
    .Featured-collection { padding: 2rem; text-align: center; }
    .Products { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; }
    .product-card { background: white; border-radius: 10px; padding: 10px; width: 250px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); position: relative; overflow: hidden; }
    .product-card img { width: 100%; border-radius: 10px; transition: transform 0.6s ease; cursor: pointer; }
    .product-card img.rotate { transform: rotateY(360deg); }
    .Rating i { color: gold; }
    .Price { margin: 10px 0; }
    .buttons { display: flex; justify-content: space-between; }
    .view-btn, .add-btn { padding: 5px 10px; border: none; background: black; color: white; border-radius: 5px; cursor: pointer; transition: 0.3s; }
    .view-btn:hover, .add-btn:hover { background: #04c2c9; }
    .heart-icon { position: absolute; top: 10px; right: 10px; font-size: 22px; color: #bbb; cursor: pointer; transition: 0.3s; }
    .heart-icon.fav { color: red; }
    /* Popup */
    .popup { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); align-items: center; justify-content: center; z-index: 999; }
    .popup-content { background: white; padding: 20px; border-radius: 10px; text-align: center; max-width: 300px; }
    .popup-content img { width: 100%; border-radius: 10px; }
    .close-popup { background: red; color: white; border: none; padding: 5px 10px; margin-top: 10px; cursor: pointer; }
</style>
</head>
<body>

<header>
    <h2>Synth</h2>
    <div class="cart-icon" onclick="window.location.href='cart.html'">
        <i class='bx bx-cart' style="font-size: 24px;"></i>
        <span id="cart-count">0</span>
    </div>
</header>

<section class="Featured-collection">
    <h2>Featured Collection</h2>
    <div class="Products" id="products-container">
        <!-- JS will load products here -->
    </div>
</section>

<!-- Popup for size details -->
<div class="popup" id="popup">
    <div class="popup-content">
        <h3 id="popup-title"></h3>
        <img id="popup-image" src="">
        <p id="popup-size">Sizes: S, M, L, XL</p>
        <button class="close-popup" onclick="closePopup()">Close</button>
    </div>
</div>

<script>
    const products = [
        { name: "T-shirt", price: "£30.33", image: "IMG-1ef2e735b1ee04870071a0413022f027-V.jpg", description: "High-quality cotton T-shirt perfect for casual wear." },
        { name: "T-shirt", price: "£32.54", image: "IMG-13dd13d66a2b0fe479b39bf2dc382b73-V.jpg", description: "Premium quality T-shirt with modern fit." },
        { name: "Shoes", price: "£60.00", image: "IMG-69de9c22a67e1e99552c1bbbc1a50589-V.jpg", description: "Comfortable sports shoes for everyday wear." }
    ];

    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let favourites = JSON.parse(localStorage.getItem('favourites')) || [];
    document.getElementById('cart-count').textContent = cart.reduce((sum, item) => sum + item.quantity, 0);

    const productsContainer = document.getElementById('products-container');

    products.forEach(product => {
        const card = document.createElement('div');
        card.classList.add('product-card');
        card.innerHTML = `
            <i class='bx bx-heart heart-icon ${favourites.includes(product.name) ? "fav" : ""}'></i>
            <img src="${product.image}" alt="${product.name}">
            <div class="Rating">
                <i class='bx bx-star'></i><i class='bx bx-star'></i><i class='bx bx-star'></i><i class='bx bxs-star-half'></i>
            </div>
            <div class="Price">
                <h4>${product.name}</h4>
                <p>${product.price}</p>
            </div>
            <div class="buttons">
                <button class="view-btn">View</button>
                <button class="add-btn">+</button>
            </div>
        `;

        // Heart toggle
        card.querySelector('.heart-icon').addEventListener('click', (e) => {
            const icon = e.target;
            if (icon.classList.contains('fav')) {
                favourites = favourites.filter(f => f !== product.name);
                icon.classList.remove('fav');
            } else {
                favourites.push(product.name);
                icon.classList.add('fav');
            }
            localStorage.setItem('favourites', JSON.stringify(favourites));
        });

        // Image rotate + popup
        card.querySelector('img').addEventListener('click', (e) => {
            const img = e.target;
            img.classList.add('rotate');
            setTimeout(() => {
                img.classList.remove('rotate');
                showPopup(product);
            }, 600);
        });

        // View product
        card.querySelector('.view-btn').addEventListener('click', () => {
            localStorage.setItem('selectedProduct', JSON.stringify(product));
            window.location.href = 'product-details.html';
        });

        // Add to cart with quantity
        card.querySelector('.add-btn').addEventListener('click', () => {
            const existing = cart.find(item => item.name === product.name);
            if (existing) {
                existing.quantity += 1;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            localStorage.setItem('cart', JSON.stringify(cart));
            document.getElementById('cart-count').textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
        });

        productsContainer.appendChild(card);
    });

    function showPopup(product) {
        document.getElementById('popup-title').textContent = product.name;
        document.getElementById('popup-image').src = product.image;
        document.getElementById('popup').style.display = 'flex';
    }

    function closePopup() {
        document.getElementById('popup').style.display = 'none';
    }
</script>

</body>
</html>