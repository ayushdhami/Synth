<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Product Details - Synth</title>
<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
<style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f5f5f5; }
    header { background: black; color: white; display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; }
    .cart-icon { position: relative; cursor: pointer; }
    .cart-icon span { background: red; color: white; border-radius: 50%; padding: 3px 7px; font-size: 12px; position: absolute; top: -5px; right: -10px; }
    .container { max-width: 900px; margin: auto; background: white; padding: 20px; border-radius: 10px; margin-top: 30px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: flex; flex-wrap: wrap; gap: 20px; }
    .container img { width: 100%; max-width: 400px; border-radius: 10px; }
    .details { flex: 1; }
    h2 { margin-top: 0; }
    .price { font-size: 1.2rem; color: #04c2c9; font-weight: bold; }
    .add-btn { background: black; color: white; padding: 10px 20px; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; transition: 0.3s; }
    .add-btn:hover { background: #04c2c9; }
</style>
</head>
<body>

<header>
    <h2>Synth</h2>
    <div class="cart-icon" onclick="window.location.href='cart.html'">
        <i class='bx bx-cart' style="font-size: 24px;"></i>
        <span id="cart-count">0</span>
    </div>
</header>

<div class="container" id="product-details">
    <!-- JS will load the product here -->
</div>

<script>
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    document.getElementById('cart-count').textContent = cart.reduce((sum, item) => sum + item.quantity, 0);

    const product = JSON.parse(localStorage.getItem('selectedProduct'));
    const container = document.getElementById('product-details');

    if (!product) {
        container.innerHTML = `<p>⚠️ No product selected. <a href="featured-collection.html">Go back to shop</a>.</p>`;
    } else {
        container.innerHTML = `
            <img src="${product.image}" alt="${product.name}">
            <div class="details">
                <h2>${product.name}</h2>
                <p class="price">${product.price}</p>
                <p>${product.description}</p>
                <p><strong>Sizes:</strong> S, M, L, XL</p>
                <button class="add-btn">Add to Cart</button>
            </div>
        `;

        document.querySelector('.add-btn').addEventListener('click', () => {
            const existing = cart.find(item => item.name === product.name);
            if (existing) {
                existing.quantity += 1;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            localStorage.setItem('cart', JSON.stringify(cart));
            document.getElementById('cart-count').textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
            alert("✅ Added to cart!");
        });
    }
</script>

</body>
</html>